# üß† sales-bot-voice-analyzer

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ä–µ—á—å —Å –ø–æ–º–æ—â—å—é Yandex SpeechKit, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∏–∞–ª–æ–≥ —Å –ø–æ–º–æ—â—å—é YandexGPT –∏ –≤—ã–¥–∞–µ—Ç –∫—Ä–∞—Ç–∫—É—é —ç–∫—Å–ø–µ—Ä—Ç–Ω—É—é –æ—Ü–µ–Ω–∫—É –ø–æ –Ω–∞–≤—ã–∫–∞–º B2B-–ø—Ä–æ–¥–∞–∂.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì• –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Telegram
- üó£ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (Yandex SpeechKit)
- üß† –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ YandexGPT
- üìä –í—ã–¥–∞—á–∞ –æ—Ü–µ–Ω–∫–∏ –ø–æ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è–º: –∫–æ–Ω—Ç–∞–∫—Ç, —Ü–µ–Ω–Ω–æ—Å—Ç—å, –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
- üîê –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –Ø–Ω–¥–µ–∫—Å Cloud Functions —á–µ—Ä–µ–∑ IAM-—Ç–æ–∫–µ–Ω—ã

---

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–±–∏—Ç –Ω–∞ –º–æ–¥—É–ª–∏ –ø–æ –ª–æ–≥–∏–∫–µ:

```
app/
‚îú‚îÄ‚îÄ main.py                # Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç webhook –æ—Ç Telegram
‚îú‚îÄ‚îÄ config.py              # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
‚îÇ
‚îú‚îÄ‚îÄ adapters/              # –ê–¥–∞–ø—Ç–µ—Ä—ã –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Telegram, Yandex API)
‚îÇ   ‚îú‚îÄ‚îÄ telegram.py
‚îÇ   ‚îú‚îÄ‚îÄ yandex_stt.py
‚îÇ   ‚îú‚îÄ‚îÄ yandex_gpt.py
‚îÇ   ‚îî‚îÄ‚îÄ yc_token.py
‚îÇ
‚îú‚îÄ‚îÄ handlers/              # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ start.py
‚îÇ   ‚îî‚îÄ‚îÄ voice.py
‚îÇ
‚îî‚îÄ‚îÄ utils/                 # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    ‚îî‚îÄ‚îÄ middleware.py      # WSGI middleware –¥–ª—è Cloud Functions
```

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –¥–µ–ø–ª–æ–π

### 1. üì¶ –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ª–æ–∫–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—à—å)

```bash
pip install -r requirements.txt
```

### 2. üåê –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Cloud Functions —á–µ—Ä–µ–∑ `--env`:

- `TG_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
- `YC_API_KEY` ‚Äî API-–∫–ª—é—á Yandex SpeechKit (–¥–ª—è STT)
- `YC_FOLDER_ID` ‚Äî ID –∫–∞—Ç–∞–ª–æ–≥–∞ –≤ –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–µ

### 3. üì§ –°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π –≤ –Ø–Ω–¥–µ–∫—Å –û–±–ª–∞–∫–æ

–°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞:
```bash
zip -r function.zip . -x '*.git*' '*__pycache__*'
```

–°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```bash
yc serverless function create   --name sales-bot-voice-analyzer
```

–ó–∞–≥—Ä—É–∑–∫–∞ –≤–µ—Ä—Å–∏–∏:
```bash
yc serverless function version create   --function-name sales-bot-voice-analyzer   --runtime python312   --entrypoint function_entrypoint.handler   --source-path ./function.zip   --memory 512M   --execution-timeout 30s   --env TG_TOKEN=xxx YC_API_KEY=xxx YC_FOLDER_ID=xxx
```

---

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç `/start` ‚Äî –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π.
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–µ.
3. –ë–æ—Ç:
   - —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª —á–µ—Ä–µ–∑ Telegram API,
   - —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–µ–∫—Å—Ç (STT),
   - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ YandexGPT —Å –ø—Ä–æ–º–ø—Ç–æ–º-–æ—Ü–µ–Ω–∫–æ–π,
   - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –î–æ—Å—Ç—É–ø –∫ SpeechKit —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `YC_API_KEY`
- –î–æ—Å—Ç—É–ø –∫ YandexGPT ‚Äî **—á–µ—Ä–µ–∑ IAM-—Ç–æ–∫–µ–Ω —Å metadata-—Å–µ—Ä–≤–µ—Ä–∞ –í–ú**
- –ù–∏–∫–∞–∫–∏–µ –∞—É–¥–∏–æ –∏–ª–∏ —Ç–µ–∫—Å—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–Ω–∞ –ª–µ—Ç—É¬ª

---

## üí° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ handlers –ø–æ–∑–≤–æ–ª–∏—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (`/report`, `/help`)
- –ú–æ–∂–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –∏–ª–∏ –æ—Ç—á—ë—Ç–æ–≤ –≤ S3, YDB –∏–ª–∏ ClickHouse
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ—á–Ω—ã—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –∏–ª–∏ –º–æ–¥–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD: GitHub Actions ‚Üí `yc function deploy`
- –û—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ (Speech, GPT) –ª–µ–≥–∫–æ –≤—ã–Ω–æ—Å—è—Ç—Å—è –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

---

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ü–æ—á–µ–º—É Flask?
Flask ‚Äî –ª—ë–≥–∫–∏–π –∏ —É–¥–æ–±–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ä–æ—à–æ –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ Cloud Functions (—á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä).

### –ü–æ—á–µ–º—É –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?
–ü—Ä–æ–µ–∫—Ç stateless. –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–∞–∑—É (PostgreSQL, S3 –∏–ª–∏ ClickHouse).

---

## ‚úÖ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- üêç Python 3.12
- ‚òÅÔ∏è Yandex Cloud Functions
- üîä Yandex SpeechKit (STT)
- ü§ñ YandexGPT (Foundation Models)
- üì¨ Telegram Bot API
- üåê Flask + WSGI

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π 
